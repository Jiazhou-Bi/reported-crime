---
title: "Counts of Crimes and Their Subtypes in Toronto from 2014 to 2023"
subtitle: "Details and Trends"
author: 
  - Justin (Jiazhou) Bi
thanks: "Inspired and instructed by: https://github.com/RohanAlexander/marriage."
date: Sept. 23, 2024
date-format: long
abstract: "First sentence. Second sentence. Third sentence. Fourth sentence."
format: pdf
jupyter: python3 
number-sections: true
bibliography: references.bib
---

# Introduction

Crime is defined as "an action or omission which constitutes an offence and is punishable by law." (@TheOxfordDictionary_1992) However, this seemingly straight forward definition can misguide us to think that crime is simple and clear concept with a specific defining criteria, swift process of judgement, and pre-defined punishment. Crime, in fact, is a complext concept that affects every aspects of all individuals, communities, and the societies. Crimes can reshape the power dynamics of our social structure, influence our public policies, and even change our day-to-day interaction with others. As a result, understanding the trends in crimes and their variations in their subtypes is crucial for policymakers, law enforcements, and every member of our society to devise better strategies to prevent crimes from happening. Therefore, this report aims to explore and examine the current of reported crimes in Toronto from 2014 to 2023, discover and highlight some of fluctuations, as well as propose some potential underlying factors that might have contributed to these trends. The raw data being used in the report is available from Toronto Open Data. (@TorontoOpenData) For the data analysis, I have used pandas (@pandas). For data visualization, I have used seaborn. (@seaborn) All the tables were generated by using plotly. (@plotly)

The analysis of crime data offers valuable insights into not only the frequency of criminal activity but also the shifting nature of these offenses. Some types of crime, such as violent offenses, theft, and property crimes, have historically shown consistent trends, often influenced by broader socio-economic conditions. In contrast, emerging forms of criminal activity, such as cybercrime and fraud, have gained prominence in recent years, reflecting the growing reliance on technology and the internet in everyday life. Understanding these patterns requires a detailed examination of various factors including demographic shifts, law enforcement practices, economic conditions, and legislative changes that may have influenced the reporting and recording of crimes during the studied period.

Between 2014 and 2023, the world experienced significant social, economic, and technological transformations, each of which likely had an impact on crime rates. For instance, the COVID-19 pandemic, which began in 2020, not only disrupted daily routines but also led to shifts in criminal behavior. Lockdowns and other public health measures reduced opportunities for certain types of crime, such as burglaries and public disturbances, while simultaneously leading to increases in domestic violence and cybercrime. Additionally, economic hardship caused by the pandemic, including rising unemployment rates and financial instability, may have driven a surge in financially motivated crimes, such as fraud and theft.

Beyond the pandemic, advancements in technology during this period contributed to the evolution of criminal activity, particularly in the realm of cybercrime. As digital technologies became more integrated into personal and professional life, the potential for cyber-related offenses, including hacking, identity theft, and online fraud, increased exponentially. The digital landscape has also made it more difficult for law enforcement agencies to detect and prevent certain types of crime, as criminals now have the tools to operate anonymously across borders and evade traditional methods of investigation.

Another important consideration in crime trends is the impact of law enforcement practices and legal reforms. Changes in policing strategies, sentencing laws, and public attitudes toward certain offenses can significantly affect the reporting and prosecution of crimes. For instance, the decriminalization of certain substances, such as cannabis, in various regions during this period may have contributed to declines in drug-related arrests, while increased awareness and reporting of issues like sexual assault and domestic violence have brought these crimes into sharper focus in recent years.

In this report, we will delve into crime statistics from 2014 to 2023, breaking down reported crimes into key subtypes such as violent crime, property crime, and cybercrime, among others. By analyzing these trends, we aim to provide a clearer understanding of how crime has evolved over the last decade and identify possible socio-economic, technological, and legal factors that have driven these changes. Through this analysis, we can gain valuable insights into how best to address the challenges posed by both traditional and emerging forms of crime in the future.

The analysis of crime data offers valuable insights into not only the frequency of criminal activity but also the shifting nature of these offenses. Some types of crime, such as violent offenses, theft, and property crimes, have historically shown consistent trends, often influenced by broader socio-economic conditions. In contrast, emerging forms of criminal activity, such as cybercrime and fraud, have gained prominence in recent years, reflecting the growing reliance on technology and the internet in everyday life. Understanding these patterns requires a detailed examination of various factors including demographic shifts, law enforcement practices, economic conditions, and legislative changes that may have influenced the reporting and recording of crimes during the studied period.

The remainder of this paper is structured as follows. @sec-data....



# Data

The dataset being used here is downloaded from Toronto Open Data website via @TorontoOpenData. This dataset contains all the reported crimes happened in the city of Toronto from 2014 to 2023. This dataset is grouped by the year of the reported crime, its category and belonging subtype, as well as the count of the subtype being reported and cleared for that year, for each division. Because I am examining the crime pattern in the whole city, I have dropped the division information, and aggregated the existing data according to their subtype, and the year of the crime being reported. In the following sub-sections, I will go through all the variables used in this report, and provide some basic descriptive statistics about them. The first 5 rows of the cleaned data used for analysis is attached below.

```{python}
import pandas as pd
data = pd.read_csv('../data/analysis_data/analysis_data.csv')
data.head()
```

## Report_Year
Report Year variable is the year of crimes being reported. In this dataset, the data spans from 2014 to 2023, encompassing a ten-year period. No month or date information was given, thus there are only 10 different values for this variable, in a chronological order.

## Category
Category includes information about the nature of the crime. In total there are six crime categroies, they are Crimes Against Property, Crimes Against the Person, Other Federal Statute Violations, Other Criminal Code Violations, Controlled Drugs and Substances Act, and Criminal Code Traffic. They are listed in the table below.

```{python}
import pandas as pd
import plotly.graph_objects as go
data = pd.read_csv('../data/analysis_data/analysis_data.csv')
unique_category = data.CATEGORY.unique()

category_table = go.Figure(data=[go.Table(header=dict(values=['Categories']), 
                 cells=dict(values=[unique_category])) 
                     ]) 
category_table.show() 
```

## Subtype
Under each crime category, there exist multiple subtypes within each category. The following is an exhaustive table of all of the subtypes of crimes and their respective category.

```{python}
import pandas as pd
import plotly.graph_objects as go
data = pd.read_csv('../data/analysis_data/analysis_data.csv')

unique_subtypes_data = data.drop_duplicates(subset='SUBTYPE')
unique_subtypes_list = unique_subtypes_data['SUBTYPE'].tolist()
categories_list_for_unique_subtypes = unique_subtypes_data['CATEGORY'].tolist()

subtype_table = go.Figure(data=[go.Table(header=dict(values=['Categories','Subtypes']), 
                 cells=dict(values=[categories_list_for_unique_subtypes, unique_subtypes_list])) 
                     ]) 
subtype_table.show() 
#print(unique_subtypes_list)
#print(categories_list_for_unique_subtypes)
```

## Count
In the original table, this value is grouped by the subtype of the crime, the division, and the year when the crime was reported. The original count indicates the number of a certain subtype of crime reported within a certain division for the year. However, as mentioned before, because I am only interested in looking at all the crimes for the City of Toronto in general, I have dropped the division information, and aggregated the count from all the divisions to a single value. Therefore, for each subtype of the crimes, there is a total count of that subtype being reported in a single year.

## Count_Cleared
This is the counts of crimes identified as cleared. In plain words, these are crimes that are dealt/solved. I have taken the same approach for this column as the previous one. After cleaerning the data,f or each subtype of the crimes, there is a total count of that subtype being reported that is also cleaered in a single year.

## Case_Clearing_Rate
This column was not included in the raw dataset, but created by dividing the cleared crimes by total crimes. A higher case clearing rate for a particulat subtype of crime usually suggests higher effectiveness of law enforcements in dealing with this subtype of crime. The value is ranged from 0 to 100%.

# Results
## Trend of Reported Cases by Year
During this ten-year-period (2014 - 2023), the overall counts of cases being reported in Toronto has increased significantly, from 113,426 in 2014 to 169,620 in 2023. Meanwhile, a noticable decrease of reported crime counts dropped in 2020 (118,568 cases) and 2021 (120,397 cases), compared to 2019 (144,529 cases). 
```{python}
import pandas as pd
import matplotlib.pyplot as plt
import plotly.graph_objects as go
df = pd.read_csv('/Users/jiazhoubi/Desktop/UT MI/INF 3104/reported-crime/data/analysis_data/analysis_data.csv')

grouped_by_year_df = df.groupby('REPORT_YEAR')['COUNT'].sum().reset_index()
fig = go.Figure(data=[go.Table(
    header=dict(values=list(grouped_by_year_df.columns),
                fill_color='royalblue',
                font=dict(color='white', size=14),
                align='center',
                height=30),  
    cells=dict(values=[grouped_by_year_df.REPORT_YEAR, grouped_by_year_df.COUNT],
               fill_color=[['lavender']*len(grouped_by_year_df), ['lightcyan']*len(grouped_by_year_df)], 
               font=dict(color='black', size=12),
               align='center',
               height=25), 
)])
fig.update_layout(
    title="Sum of Reported Cases by Year",
    title_x=0.5, 
    width=800, 
    height=400, 
    margin=dict(l=10, r=10, b=10, t=40) 
)
fig.show()
plt.figure(figsize = (10,6))
plt.plot(grouped_by_year_df['REPORT_YEAR'], grouped_by_year_df['COUNT'], marker = 'o', linestyle = 'solid')
plt.xlabel('Year of The Cases Being Reported')
plt.ylabel('Number of Caese Being Reported')
plt.title('Count of Reported Cases by Year')
plt.xticks(grouped_by_year_df['REPORT_YEAR'])
plt.grid(True)
plt.show()
```

## Trend of Reported Cases per Category by Year
Among all the six categories, crimes against property has a significant higher count than all the other categories. In 2023, a total of 119,629 cases of crimes against property were reported, compared to the second highest count, which is crimes against ther person, with 29,892 cases. Below is a table of the count of reported crime for each category, for 2014, 2020, and 2023, as well as a line chart for the flucuating trend.

```{python}
import pandas as pd
import matplotlib.pyplot as plt
import plotly.graph_objects as go
df = pd.read_csv('/Users/jiazhoubi/Desktop/UT MI/INF 3104/reported-crime/data/analysis_data/analysis_data.csv')

grouped_by_year_category_df = df.groupby(['REPORT_YEAR', 'CATEGORY'])['COUNT'].sum().reset_index()
filtered_df = grouped_by_year_category_df[grouped_by_year_category_df['REPORT_YEAR'].isin([2014, 2020, 2023])]
fig = go.Figure(data=[go.Table(
    header=dict(values=["Year", "Category", "Count"],
                fill_color='royalblue',
                font=dict(color='white', size=14),
                align='center',
                height=30),
    cells=dict(values=[filtered_df.REPORT_YEAR, 
                       filtered_df.CATEGORY, 
                       filtered_df.COUNT],
               fill_color=[['lavender']*len(filtered_df), ['lightcyan']*len(filtered_df)],
               font=dict(color='black', size=12),
               align='center',
               height=25),
)])
fig.update_layout(
    title="Count of Reported Cases by Year and Category (2014, 2020, 2023)",
    title_x=0.5,
    width=800,
    height=500,
    margin=dict(l=10, r=10, b=10, t=40)
)
fig.show()

plt.figure(figsize=(10, 6))
for category in grouped_by_year_category_df['CATEGORY'].unique():
    category_data = grouped_by_year_category_df[grouped_by_year_category_df['CATEGORY'] == category]
    plt.plot(category_data['REPORT_YEAR'], category_data['COUNT'], marker='o', linestyle='solid', label=category)
plt.xlabel('Year of The Cases Being Reported')
plt.ylabel('Number of Cases Being Reported')
plt.title('Count of Reported Cases by Year and Category')
plt.xticks(grouped_by_year_category_df['REPORT_YEAR'].unique())
plt.legend(title='Category')
plt.grid(True)
plt.show()
```

## Subtype of Crimes Against Property by Year and Their Gorwth Rates
The overall pattern for each subtype of crimes under crimes against property is comparable to the overall reported crime pattern, with a increase from 2014 to 2023, despite a significant drop in 2020 and 2021. Among all the subtypes within crimes against property, the most common reported crime is theft under $5,000. For each subtype, the nominal growth rate between 2014 and 2023 is also calculated and attached here.
```{python}
import pandas as pd
import matplotlib.pyplot as plt
import plotly.graph_objects as go
df = pd.read_csv('/Users/jiazhoubi/Desktop/UT MI/INF 3104/reported-crime/data/analysis_data/analysis_data.csv')

crime_against_property_df = df[df['CATEGORY'] == 'Crimes Against Property']
#crime_against_property_df.head()
grouped_by_year_subtype_df = crime_against_property_df.groupby(['REPORT_YEAR','SUBTYPE'])['COUNT'].sum().reset_index()
plt.figure(figsize=(10,6))
for subtype in grouped_by_year_subtype_df['SUBTYPE'].unique():
    subtype_data = grouped_by_year_subtype_df[grouped_by_year_subtype_df['SUBTYPE'] == subtype]
    plt.plot(subtype_data['REPORT_YEAR'],subtype_data['COUNT'],marker = 'o', linestyle = 'solid', label=subtype)
plt.xlabel('Year of The Cases Being Reported')
plt.ylabel('Number of Cases Being Reported')
plt.title('Count of Subtypes of Reported Crimes Against Property by Year and Category')
plt.xticks(grouped_by_year_subtype_df['REPORT_YEAR'].unique())
plt.legend(title='Subtype',loc = 'upper left',fontsize = 8)
plt.grid(True)
plt.show()

data_2014 = grouped_by_year_subtype_df[grouped_by_year_subtype_df['REPORT_YEAR'] == 2014]
data_2023 = grouped_by_year_subtype_df[grouped_by_year_subtype_df['REPORT_YEAR'] == 2023]
merged_data_count = pd.merge(data_2014, data_2023, on='SUBTYPE', suffixes=('_2014', '_2023'))
merged_data_count['percentage_increase'] = ((merged_data_count['COUNT_2023'] - merged_data_count['COUNT_2014']) / merged_data_count['COUNT_2014']) * 100
merged_data_count[['SUBTYPE', 'COUNT_2014', 'COUNT_2023', 'percentage_increase']]
merged_data_count['percentage_increase'] = merged_data_count['percentage_increase'].round(2)
fig = go.Figure(data=[go.Table(
    header=dict(values=["Subtype", "Count in 2014", "Count in 2023", "Percentage Increase"],
                fill_color='royalblue',
                font=dict(color='white', size=14),
                align='center'),
    cells=dict(values=[merged_data_count['SUBTYPE'], 
                       merged_data_count['COUNT_2014'], 
                       merged_data_count['COUNT_2023'], 
                       merged_data_count['percentage_increase']],
               fill_color=[['lavender']*len(merged_data_count), ['lightcyan']*len(merged_data_count)],
               font=dict(color='black', size=12),
               align='center'))
])
fig.update_layout(
    title="Comparison of Reported Cases (2014 vs 2023) with Percentage Increase",
    width=800,
    height=600
)
fig.show()
```

## Crime Subtype Clear Rate from 2014 to 2023 and Its Trend
Crime clearing rate has dropped for all subtypes of crimes against property from 2014 to 2023, ranging from a 10.25% decrease for break and enter to apartment, to 87.02% decrease for fraud. The trends and details are dipicted in the graph and table below.

```{python}
import pandas as pd
import matplotlib.pyplot as plt
import plotly.graph_objects as go
df = pd.read_csv('/Users/jiazhoubi/Desktop/UT MI/INF 3104/reported-crime/data/analysis_data/analysis_data.csv')
crime_against_property_df = df[df['CATEGORY'] == 'Crimes Against Property']

grouped_by_year_subtype_df = crime_against_property_df.groupby(['REPORT_YEAR','SUBTYPE'])['CASE_CLEARING_RATE'].mean().reset_index()
plt.figure(figsize=(10,6))
for subtype in grouped_by_year_subtype_df['SUBTYPE'].unique():
    subtype_data = grouped_by_year_subtype_df[grouped_by_year_subtype_df['SUBTYPE'] == subtype]
    plt.plot(subtype_data['REPORT_YEAR'],subtype_data['CASE_CLEARING_RATE'],marker = 'o', linestyle = 'solid', label=subtype)
plt.xlabel('Year of The Cases Being Reported')
plt.ylabel('Clearing Rate of Cases Being Reported')
plt.title('Clearing Rate of Subtypes of Reported Crimes Against Property by Year and Category')
plt.xticks(grouped_by_year_subtype_df['REPORT_YEAR'].unique())
plt.legend(title='Subtype',loc = 'upper left',fontsize = 8)
plt.grid(True)
plt.show()

data_2014 = grouped_by_year_subtype_df[grouped_by_year_subtype_df['REPORT_YEAR'] == 2014]
data_2023 = grouped_by_year_subtype_df[grouped_by_year_subtype_df['REPORT_YEAR'] == 2023]
merged_data = pd.merge(data_2014, data_2023, on='SUBTYPE', suffixes=('_2014', '_2023'))
merged_data['percentage_increase'] = ((merged_data['CASE_CLEARING_RATE_2023'] - merged_data['CASE_CLEARING_RATE_2014']) / merged_data['CASE_CLEARING_RATE_2014']) * 100
merged_data[['SUBTYPE', 'CASE_CLEARING_RATE_2014', 'CASE_CLEARING_RATE_2023', 'percentage_increase']]
merged_data['CASE_CLEARING_RATE_2014'] = merged_data['CASE_CLEARING_RATE_2014'].round(2)
merged_data['CASE_CLEARING_RATE_2023'] = merged_data['CASE_CLEARING_RATE_2023'].round(2)
merged_data['percentage_increase'] = merged_data['percentage_increase'].round(2)
fig = go.Figure(data=[go.Table(
    header=dict(values=["Subtype", "Case Clearing Rate in 2014", "Case Clearing Rate in 2023", "Percentage Increase (%)"],
                fill_color='royalblue',
                font=dict(color='white', size=14),
                align='center'),
    cells=dict(values=[merged_data['SUBTYPE'], 
                       merged_data['CASE_CLEARING_RATE_2014'], 
                       merged_data['CASE_CLEARING_RATE_2023'], 
                       merged_data['percentage_increase']],
               fill_color=[['lavender']*len(merged_data), ['lightcyan']*len(merged_data)],
               font=dict(color='black', size=12),
               align='center'))
])
fig.update_layout(
    title="Case Clearing Rates (2014 vs 2023) with Percentage Increase",
    width=800,
    height=600
)
fig.show()
```


# Discussion

## First discussion point {#sec-first-point}

## Second discussion point

## Third discussion point

## Weaknesses and next steps

Weaknesses and next steps should also be included.

\newpage


# References


